var honk=null;Alfresco.WebPreview.prototype.Plugins.HtmlWebPreview=function(e,t){return this.wp=e,this.options=e.options,this.attributes=YAHOO.lang.merge(Alfresco.util.deepCopy(this.attributes),t),this},Alfresco.WebPreview.prototype.Plugins.HtmlWebPreview.prototype={attributes:{srcMimeType:null},report:function(){},display:function(){var e=this.attributes.srcMimeType?this.attributes.srcMimeType:this.wp.options.mimeType,t=e.replace("/","-");return this.getDocument(this.wp.options.nodeRef,e,t),""},getDocument:function(e,t,s){var r=this.wp.getContentUrl(!1);Alfresco.util.Ajax.request({url:r,responseContentType:"text/html",successCallback:{fn:function(e){this.wp.widgets.previewerElement.innerHTML=" ";var r="";renderToc=this.wp.options.htmlpreviewTocRender,minToc=this.wp.options.htmlpreviewTocMin,maxHlevel=this.wp.options.htmlpreviewTocMaxHeadlineLevel,r=e.serverResponse&&e.serverResponse.status&&200==e.serverResponse.status?e.serverResponse.responseText:'<div class="error">'+this.wp.msg("hwp.error.getcontent")+"</div>";var i=Alfresco.HtmlWebPreviewLib.renderContent(r,t,s,this.wp.msg,renderToc,minToc,maxHlevel);i.appendChild(document.createElement("hr")),this.wp.widgets.previewerElement.appendChild(i)},scope:this},failureCallback:{fn:function(e){this.wp.widgets.previewerElement.innerHTML+='<div class="error">'+this.wp.msg("hwp.error.getcontent")+"</div>"},scope:this},scope:this})}};